<div style="padding: auto; margin: 5% ;">
  <div style="display: block; border: 1px solid rgba(159,157,155,0.25); align-items: flex-start; padding: 30px;"
       ng-if="!ctrl.loggedIn">
    <div style="margin: auto"><span>Login</span></div>
    <div>
      <span style="width: 30%;">Email</span> <input type="text" name="email" ng-model="ctrl.user.email">
    </div>
    <div>
      <span style="width: 30%;">Password</span> <input type="password" name="password" ng-model="ctrl.user.password">
    </div>
    <div>
      <button type="button" ng-click="ctrl.getOAuthToken()">Login</button>
    </div>
  </div>

  <div ng-if="ctrl.loggedIn"
       style="display: block; border: 1px solid rgba(159,157,155,0.25); align-items: flex-start; padding: 30px;">
    <div style="margin: auto"><span>Upload File</span></div>
    <div>
      <input name="inputFile" type="file" bind-file="" ng-model="ctrl.inputFile" accept=".doc, .docx, .png, .pdf"
             id="inputFile">
    </div>
    <div>
      <button type="button" ng-click="ctrl.uploadFile()">Upload File</button>
    </div>
  </div>

  <div ng-if="ctrl.loggedIn" style="padding: 30px 0;">
    <div style="display: flex; width: 100%">
      <div style="width: 45%; margin-right: 1%;">
        <div>
          <button type="button" ng-click="ctrl.getAllDocuments()">Get Documents</button>
        </div>
        <div>
          <table>
            <thead>
            <th width="30%">File</th>
            <th width="30%" style="text-align: center">thumbnail</th>
            <th width="20%" style="text-align: center">Actions</th>
            </thead>
            <tr ng-repeat="doc in ctrl.allDocuments">
              <td>
                <div>
                  <div>
                    <a class="lined" ng-click="ctrl.getDocument(doc)">{{doc.original_filename}}</a>
                  </div>
                  <div style="opacity: 0.9; padding-top: 4px; font-size: 11px;">
                    Requests: {{doc.requests.length}}, Invites: {{doc.field_invites.length}}
                  </div>
                  <div style="opacity: 0.9; font-size: 11px;">
                    Fields: {{doc.fields.length}}
                  </div>
                </div>
              </td>
              <!--<td style="text-align: center"><img style="border: 1px solid #d3dce0;" width="100" height="100" ng-src="{{doc.receivedImage}}"></td>-->
              <td style="text-align: center"><img style="border: 1px solid #d3dce0;" width="80" height="100"
                                                  ng-src="{{doc.image}}"></td>
              <td style="text-align: center">
                <a class="link-icon" style="padding: 5px;" ng-click="ctrl.deleteDocument(doc)"><i
                        class="fa fa-trash-o fa-lg" aria-hidden="true"></i></a>
                <a class="link-icon" style="padding: 5px;" ng-click="ctrl.updateDocument(doc)"><i
                        class="fa fa-pencil-square fa-lg"></i></a>
                <a class="link-icon" style="padding: 5px;" ng-click="ctrl.getDocument(doc)"><i class="fa fa-eye"
                                                                                               aria-hidden="true"></i></a>
                <a ng-if="doc.fields.length === 0" class="link-icon"
                   ng-click="doc.collectFreeFormInviteDetails = true;"><i class="fa fa-share-square-o fa-lg"
                                                                          aria-hidden="true"></i></a>
                <span ng-if="doc.collectFreeFormInviteDetails">
                <input type="text" placeholder="Recipient Email" ng-model="ctrl.recipient">
                <input type="button" value="Send Invite" ng-click="ctrl.sendFreeFormInvite(doc, ctrl.recipient)">
              </span>
              </td>

            </tr>
          </table>
        </div>
      </div>
      <div style="width: 54%; padding-left: 1%">
        <div style="display: inline-flex; margin-bottom: 6px; width: 100%;">
          <div style="width: 60%;">
            <a class="link"
               ng-class="{'active': ctrl.currentPage.pageIndex === $index || !ctrl.currentPage.pageIndex && $index === 0}"
               style="margin-right: 10px;" ng-repeat="page in ctrl.currentDocument.pages"
               ng-click="ctrl.loadCurrentPage(page, $index)">{{$index + 1}}
            </a>
          </div>
          <div style="padding-left: 30px; float: right; display: inline-table;">
            <h3 style="margin: 0 30px;">
            {{ctrl.currentDocument.original_filename}}
              <a ng-if="ctrl.currentDocument.fields.length > 0" class="link" ng-click="ctrl.openRolesBasedInvite(ctrl.currentDocument)">
                <i style="padding-left: 5px;" class="fa fa-share" aria-hidden="true"></i>
              </a>
            </h3>
          </div>
        </div>
        <div ng-if="ctrl.collectRoleBasedInvitationDetails"
             style="border: 1px solid #d3dce0;padding: 10px;margin-bottom: 5px;">
          <div style="padding-bottom: 10px;">
            <div style="display: inline;">
              <label style="position: relative; top: -15px;">Subject: </label><textarea cols="50" rows="3" ng-model="ctrl.invite.subject"></textarea>
              <a  style="margin-left: 2px; white-space: nowrap;position: relative; top: -15px;" class="link" ng-click="ctrl.sendRoleBasedInvite()">Send Invite</a>
            </div>
            <div style="padding-top: 10px;">
              <label style="position: relative; top: -15px;">Message: </label><textarea cols="50" rows="3" ng-model="ctrl.invite.message"></textarea></div>
          </div>
          <div ng-repeat="recipient in ctrl.invite.recipients" style="display: flex; padding-bottom: 10px;">
            <div style="width: 40%">
              Roles: <select  class="input" ng-model="recipient.role" name="roles" id="roles"
                             ng-options="role as role.name for role in ctrl.currentDocument.roles"></select>
            </div>
            <div style="width: 40%">Email: <input class="input" type="text" ng-model="recipient.email"></div>
            <div style="width: 10%">Order: <input style="width: 30px; height: 30px;" type="number" ng-model="recipient.order"></div>
            <div ng-if="$index === ctrl.invite.recipients.length - 1">
              <a  style="margin-left: 10px; white-space: nowrap; position: relative; top: 20px;" class="link" ng-click="ctrl.addInvitee()">Add</a>
            </div>
        </div>
        </div>
        <div><img style="border: 1px solid #d3dce0;" width="{{ctrl.currentPage.size.width}}"
                  height="{{ctrl.currentPage.size.height}}" src="{{ctrl.currentPage.receivedImage}}"></div>
      </div>
    </div>
    <div>

    </div>
  </div>
</div>